
@marble-size: @space-large;
@arrow-thickness: @line-thickness;
@diagram-vertical-margin: @space-large;
@arrow-side-padding: @space-large;
@arrow-head-size: 8px;
@completion-height: 44px;
@arrow-color: @color-black;

.diagram {
  position: relative;
  display: block;
  width: 100%;
  height: (@marble-size + (2 * @diagram-vertical-margin));
  overflow: visible;
  .text-unselectable();

  .arrow {
    background-color: @arrow-color;
    height: @arrow-thickness;
    position: absolute;
    top: (@diagram-vertical-margin + (@marble-size / 2));
    left: @sandbox-side-padding;
    right: @sandbox-side-padding;
  }
  .arrow-head {
    width: 0;
    height: 0;
    border-top: @arrow-head-size solid transparent;
    border-bottom: @arrow-head-size solid transparent;
    border-left: (2 * @arrow-head-size) solid @arrow-color;
    display: inline-block;
    right: (@sandbox-side-padding - 1px);
    position: absolute;
    top: (@diagram-vertical-margin + (@marble-size / 2) - @arrow-head-size + (@arrow-thickness / 2));
  }

  .marbles {
    position: absolute;
    left: (@arrow-side-padding + @sandbox-side-padding + (@marble-size / 2));
    right: (@arrow-side-padding + @sandbox-side-padding + (@marble-size / 2));
    top: (@diagram-vertical-margin + (@marble-size / 2));
    height: @completion-height;
    margin-top: -(@completion-height / 2);

    .marble-container {
      width: @marble-size;
      height: @marble-size;
      position: relative;
      display: inline-block;
      margin: -(@marble-size / 2);
      top: (@marble-size - @completion-height) / 2;
      &.draggable {
        cursor: ew-resize;
        &:hover {
          svg.marble {
            .svg-z-depth-1();
          }
        }
      }

      .marble-content {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        margin: 0;
        text-align: center;
        line-height: @marble-size;
        .text-unselectable();
      }
      svg.marble {
        overflow: visible;
        width: @marble-size;
        height: @marble-size;
      }
      circle.marble {
        stroke: @color-black;
        fill: @color-blue;
        &.marble-color-1 { fill: @color-blue; }
        &.marble-color-2 { fill: @color-green; }
        &.marble-color-3 { fill: @color-yellow; }
        &.marble-color-4 { fill: @color-red; }
      }
    }

    .completion {
      display: inline-block;
      position: relative;
      width: (8*@arrow-thickness);
      height: @completion-height;
      margin: 0 (-4*@arrow-thickness);
      .completion-marker {
        width: @arrow-thickness;
        height: 100%;
        margin-left: (3.5*@arrow-thickness);
        background-color: @arrow-color;
      }
      &.draggable {
        cursor: ew-resize;
        &:hover {
          .completion-marker {
            .z-depth-1();
          }
        }
      }
    }
  }
}
